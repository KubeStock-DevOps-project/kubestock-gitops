# =============================================================================
# Production Overlay - kubestock-production namespace
# =============================================================================
# Rolling Update Deployment Strategy
# Uses RDS PostgreSQL for database
# CORS: kubestock.dpiyumal.me
# =============================================================================
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: kubestock-production

resources:
  - ../../base/services/ms-product/
  - ../../base/services/ms-inventory/
  - ../../base/services/ms-supplier/
  - ../../base/services/ms-order-management/
  - ../../base/services/ms-identity/
  - ../../base/services/frontend/
  - namespace.yaml
  - external-secrets.yaml

labels:
  - pairs:
      environment: production
    includeSelectors: false

# Production replicas patch
patches:
  - patch: |-
      - op: replace
        path: /spec/replicas
        value: 2
    target:
      kind: Deployment
